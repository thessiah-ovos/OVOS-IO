{"ast":null,"code":"import _slicedToArray from\"/mnt/c/Users/riche/ThessianSound/ThessianSoundLLC/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef,useContext}from'react';import playerContext from'../contexts/playerContext';function Controls(){// Global State\nvar _useContext=useContext(playerContext),currentSong=_useContext.currentSong,songs=_useContext.songs,nextSong=_useContext.nextSong,prevSong=_useContext.prevSong,repeat=_useContext.repeat,random=_useContext.random,playing=_useContext.playing,toggleRandom=_useContext.toggleRandom,toggleRepeat=_useContext.toggleRepeat,togglePlaying=_useContext.togglePlaying,handleEnd=_useContext.handleEnd;console.log(songs);var audio=useRef('audio_tag');// self State\nvar _useState=useState(0.3),_useState2=_slicedToArray(_useState,2),statevolum=_useState2[0],setStateVolum=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),dur=_useState4[0],setDur=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),currentTime=_useState6[0],setCurrentTime=_useState6[1];var fmtMSS=function fmtMSS(s){return(s-(s%=60))/60+(9<s?':':':0')+~~s;};var toggleAudio=function toggleAudio(){return audio.current.paused?audio.current.play():audio.current.pause();};var handleVolume=function handleVolume(q){setStateVolum(q);audio.current.volume=q;};var handleProgress=function handleProgress(e){var compute=e.target.value*dur/100;setCurrentTime(compute);audio.current.currentTime=compute;};useEffect(function(){audio.current.volume=statevolum;if(playing){toggleAudio();}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[currentSong]);return/*#__PURE__*/React.createElement(\"div\",{className:\"controls\"},/*#__PURE__*/React.createElement(\"audio\",{onTimeUpdate:function onTimeUpdate(e){return setCurrentTime(e.target.currentTime);},onCanPlay:function onCanPlay(e){return setDur(e.target.duration);},onEnded:handleEnd,ref:audio,type:\"audio/mpeg\",preload:\"true\",src:songs[currentSong][1]}),/*#__PURE__*/React.createElement(\"div\",{className:\"vlme\"},/*#__PURE__*/React.createElement(\"span\",{className:\"volum\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-volume-down\"})),/*#__PURE__*/React.createElement(\"input\",{value:Math.round(statevolum*100),type:\"range\",name:\"volBar\",id:\"volBar\",onChange:function onChange(e){return handleVolume(e.target.value/100);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"musicControls\"},/*#__PURE__*/React.createElement(\"span\",{className:\"prev\",onClick:prevSong},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-step-backward\"})),/*#__PURE__*/React.createElement(\"span\",{className:\"play\",onClick:function onClick(){togglePlaying();toggleAudio();}},/*#__PURE__*/React.createElement(\"span\",{className:!playing?'':'hide'},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-play\"})),/*#__PURE__*/React.createElement(\"span\",{className:!playing?'hide':''},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-pause\"}))),/*#__PURE__*/React.createElement(\"span\",{className:\"next\",onClick:nextSong},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-step-forward\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"progressb\"},/*#__PURE__*/React.createElement(\"span\",{className:\"currentT\"},fmtMSS(currentTime)),/*#__PURE__*/React.createElement(\"input\",{onChange:handleProgress,value:dur?currentTime*100/dur:0,type:\"range\",name:\"progresBar\",id:\"prgbar\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"totalT\"},fmtMSS(dur))),/*#__PURE__*/React.createElement(\"div\",{className:\"plsoptions\"},/*#__PURE__*/React.createElement(\"span\",{onClick:toggleRandom,className:\"random \"+(random?'active':'')},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-random\"})),/*#__PURE__*/React.createElement(\"span\",{onClick:toggleRepeat,className:\"repeat \"+(repeat?'active':'')},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-redo-alt\"}))));}export default Controls;","map":{"version":3,"sources":["/mnt/c/Users/riche/ThessianSound/ThessianSoundLLC/frontend/src/components/Controls.js"],"names":["React","useState","useEffect","useRef","useContext","playerContext","Controls","currentSong","songs","nextSong","prevSong","repeat","random","playing","toggleRandom","toggleRepeat","togglePlaying","handleEnd","console","log","audio","statevolum","setStateVolum","dur","setDur","currentTime","setCurrentTime","fmtMSS","s","toggleAudio","current","paused","play","pause","handleVolume","q","volume","handleProgress","e","compute","target","value","duration","Math","round"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, useContext } from 'react'\r\nimport playerContext from '../contexts/playerContext'\r\n\r\nfunction Controls() {\r\n\r\n  // Global State\r\n  const {\r\n    currentSong,\r\n    songs,\r\n    nextSong,\r\n    prevSong,\r\n    repeat,\r\n    random,\r\n    playing,\r\n    toggleRandom,\r\n    toggleRepeat,\r\n    togglePlaying,\r\n    handleEnd,\r\n\r\n  } = useContext(playerContext)\r\n  console.log(songs)\r\n  const audio = useRef('audio_tag');\r\n\r\n  // self State\r\n  const [statevolum, setStateVolum] = useState(0.3)\r\n  const [dur, setDur] = useState(0)\r\n  const [currentTime, setCurrentTime] = useState(0)\r\n\r\n  const fmtMSS = (s) => { return (s - (s %= 60)) / 60 + (9 < s ? ':' : ':0') + ~~(s) }\r\n\r\n  const toggleAudio = () => audio.current.paused ? audio.current.play() : audio.current.pause();\r\n\r\n  const handleVolume = (q) => {\r\n    setStateVolum(q);\r\n    audio.current.volume = q;\r\n  }\r\n\r\n  const handleProgress = (e) => {\r\n    let compute = (e.target.value * dur) / 100;\r\n    setCurrentTime(compute);\r\n    audio.current.currentTime = compute\r\n  }\r\n\r\n  useEffect(() => {\r\n    audio.current.volume = statevolum;\r\n    if (playing) { toggleAudio() }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [currentSong])\r\n\r\n  return (\r\n    <div className=\"controls\">\r\n      <audio\r\n\r\n        onTimeUpdate={(e) => setCurrentTime(e.target.currentTime)}\r\n        onCanPlay={(e) => setDur(e.target.duration)}\r\n        onEnded={handleEnd}\r\n\r\n        ref={audio}\r\n        type=\"audio/mpeg\"\r\n        preload='true'\r\n        src={songs[currentSong][1]} />\r\n      <div className=\"vlme\">\r\n\r\n        <span className=\"volum\"><i className=\"fas fa-volume-down\"></i></span>\r\n        <input value={Math.round(statevolum * 100)} type=\"range\" name=\"volBar\" id=\"volBar\" onChange={(e) => handleVolume(e.target.value / 100)} />\r\n\r\n      </div>\r\n      <div className=\"musicControls\">\r\n        <span className=\"prev\" onClick={prevSong}><i className=\"fas fa-step-backward\"></i></span>\r\n\r\n        <span className=\"play\" onClick={() => { togglePlaying(); toggleAudio(); }}>\r\n          <span className={!playing ? '' : 'hide'}><i className=\"fas fa-play\"></i></span>\r\n          <span className={!playing ? 'hide' : ''}><i className=\"fas fa-pause\"></i></span>\r\n        </span>\r\n\r\n        <span className=\"next\" onClick={nextSong}><i className=\"fas fa-step-forward\"></i></span>\r\n      </div>\r\n      <div className=\"progressb\">\r\n        <span className=\"currentT\">{fmtMSS(currentTime)}</span>\r\n        <input\r\n          onChange={handleProgress}\r\n          value={dur ? (currentTime * 100) / dur : 0}\r\n          type=\"range\" name=\"progresBar\" id=\"prgbar\" />\r\n        <span className=\"totalT\">{fmtMSS(dur)}</span>\r\n\r\n      </div>\r\n      <div className=\"plsoptions\">\r\n\r\n        <span onClick={toggleRandom} className={\"random \" + (random ? 'active' : '')}>\r\n          <i className=\"fas fa-random\"></i>\r\n        </span>\r\n        <span onClick={toggleRepeat} className={\"repeat \" + (repeat ? 'active' : '')}>\r\n          <i className=\"fas fa-redo-alt\"></i>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Controls"]},"metadata":{},"sourceType":"module"}