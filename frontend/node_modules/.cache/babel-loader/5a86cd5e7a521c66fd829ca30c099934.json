{"ast":null,"code":"\"use strict\";\n\nvar _createForOfIteratorHelper = require(\"/mnt/c/Users/riche/ThessianSound/ThessianSoundLLC/frontend/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\");\n\nvar _classCallCheck = require(\"/mnt/c/Users/riche/ThessianSound/ThessianSoundLLC/frontend/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/mnt/c/Users/riche/ThessianSound/ThessianSoundLLC/frontend/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _get = require(\"/mnt/c/Users/riche/ThessianSound/ThessianSoundLLC/frontend/node_modules/@babel/runtime/helpers/get\");\n\nvar _getPrototypeOf = require(\"/mnt/c/Users/riche/ThessianSound/ThessianSoundLLC/frontend/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/mnt/c/Users/riche/ThessianSound/ThessianSoundLLC/frontend/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _createSuper = require(\"/mnt/c/Users/riche/ThessianSound/ThessianSoundLLC/frontend/node_modules/@babel/runtime/helpers/createSuper\");\n\nvar HTMLElementImpl = require(\"./HTMLElement-impl\").implementation;\n\nvar _require = require(\"../helpers/strings\"),\n    stripAndCollapseASCIIWhitespace = _require.stripAndCollapseASCIIWhitespace;\n\nvar _require2 = require(\"../helpers/internal-constants\"),\n    domSymbolTree = _require2.domSymbolTree;\n\nvar _require3 = require(\"../helpers/traversal\"),\n    closest = _require3.closest;\n\nvar HTMLOptionElementImpl = /*#__PURE__*/function (_HTMLElementImpl) {\n  _inherits(HTMLOptionElementImpl, _HTMLElementImpl);\n\n  var _super = _createSuper(HTMLOptionElementImpl);\n\n  function HTMLOptionElementImpl(args, privateData) {\n    var _this;\n\n    _classCallCheck(this, HTMLOptionElementImpl);\n\n    _this = _super.call(this, args, privateData); // whenever selectedness is set to true, make sure all\n    // other options set selectedness to false\n\n    _this._selectedness = false;\n    _this._dirtyness = false;\n    return _this;\n  }\n\n  _createClass(HTMLOptionElementImpl, [{\n    key: \"_removeOtherSelectedness\",\n    value: function _removeOtherSelectedness() {\n      // Remove the selectedness flag from all other options in this select\n      var select = this._selectNode;\n\n      if (select && !select.hasAttribute(\"multiple\")) {\n        var _iterator = _createForOfIteratorHelper(select.options),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var option = _step.value;\n\n            if (option !== this) {\n              option._selectedness = false;\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n    }\n  }, {\n    key: \"_askForAReset\",\n    value: function _askForAReset() {\n      var select = this._selectNode;\n\n      if (select) {\n        select._askedForAReset();\n      }\n    }\n  }, {\n    key: \"_attrModified\",\n    value: function _attrModified(name) {\n      if (!this._dirtyness && name === \"selected\") {\n        this._selectedness = this.hasAttribute(\"selected\");\n\n        if (this._selectedness) {\n          this._removeOtherSelectedness();\n        }\n\n        this._askForAReset();\n      }\n\n      _get(_getPrototypeOf(HTMLOptionElementImpl.prototype), \"_attrModified\", this).apply(this, arguments);\n    }\n  }, {\n    key: \"_selectNode\",\n    get: function get() {\n      var select = domSymbolTree.parent(this);\n\n      if (!select) {\n        return null;\n      }\n\n      if (select.nodeName.toUpperCase() !== \"SELECT\") {\n        select = domSymbolTree.parent(select);\n\n        if (!select || select.nodeName.toUpperCase() !== \"SELECT\") {\n          return null;\n        }\n      }\n\n      return select;\n    }\n  }, {\n    key: \"form\",\n    get: function get() {\n      return closest(this, \"form\");\n    }\n  }, {\n    key: \"text\",\n    get: function get() {\n      // TODO is not correctly excluding script and SVG script descendants\n      return stripAndCollapseASCIIWhitespace(this.textContent);\n    },\n    set: function set(V) {\n      this.textContent = V;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this.hasAttribute(\"value\") ? this.getAttribute(\"value\") : this.text;\n    },\n    set: function set(val) {\n      this.setAttribute(\"value\", val);\n    }\n  }, {\n    key: \"index\",\n    get: function get() {\n      var select = closest(this, \"select\");\n\n      if (select === null) {\n        return 0;\n      }\n\n      return select.options.indexOf(this);\n    }\n  }, {\n    key: \"selected\",\n    get: function get() {\n      return this._selectedness;\n    },\n    set: function set(s) {\n      this._dirtyness = true;\n      this._selectedness = Boolean(s);\n\n      if (this._selectedness) {\n        this._removeOtherSelectedness();\n      }\n\n      this._askForAReset();\n    } // TODO this is quite wrong\n\n  }, {\n    key: \"label\",\n    get: function get() {\n      if (this.hasAttribute(\"label\")) {\n        return this.getAttribute(\"label\");\n      }\n\n      var select = this._selectNode;\n\n      if (select) {\n        return select.getAttribute(\"label\");\n      }\n\n      return null;\n    },\n    set: function set(V) {\n      var select = this._selectNode;\n\n      if (select) {\n        select.setAttribute(\"label\", V);\n      }\n    }\n  }]);\n\n  return HTMLOptionElementImpl;\n}(HTMLElementImpl);\n\nmodule.exports = {\n  implementation: HTMLOptionElementImpl\n};","map":{"version":3,"sources":["/mnt/c/Users/riche/ThessianSound/ThessianSoundLLC/frontend/node_modules/jsdom/lib/jsdom/living/nodes/HTMLOptionElement-impl.js"],"names":["HTMLElementImpl","require","implementation","stripAndCollapseASCIIWhitespace","domSymbolTree","closest","HTMLOptionElementImpl","args","privateData","_selectedness","_dirtyness","select","_selectNode","hasAttribute","options","option","_askedForAReset","name","_removeOtherSelectedness","_askForAReset","apply","arguments","parent","nodeName","toUpperCase","textContent","V","getAttribute","text","val","setAttribute","indexOf","s","Boolean","module","exports"],"mappings":"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","sourcesContent":["\"use strict\";\nconst HTMLElementImpl = require(\"./HTMLElement-impl\").implementation;\nconst { stripAndCollapseASCIIWhitespace } = require(\"../helpers/strings\");\nconst { domSymbolTree } = require(\"../helpers/internal-constants\");\nconst { closest } = require(\"../helpers/traversal\");\n\nclass HTMLOptionElementImpl extends HTMLElementImpl {\n  constructor(args, privateData) {\n    super(args, privateData);\n\n    // whenever selectedness is set to true, make sure all\n    // other options set selectedness to false\n    this._selectedness = false;\n    this._dirtyness = false;\n  }\n  _removeOtherSelectedness() {\n    // Remove the selectedness flag from all other options in this select\n    const select = this._selectNode;\n\n    if (select && !select.hasAttribute(\"multiple\")) {\n      for (const option of select.options) {\n        if (option !== this) {\n          option._selectedness = false;\n        }\n      }\n    }\n  }\n  _askForAReset() {\n    const select = this._selectNode;\n    if (select) {\n      select._askedForAReset();\n    }\n  }\n  _attrModified(name) {\n    if (!this._dirtyness && name === \"selected\") {\n      this._selectedness = this.hasAttribute(\"selected\");\n      if (this._selectedness) {\n        this._removeOtherSelectedness();\n      }\n      this._askForAReset();\n    }\n    super._attrModified.apply(this, arguments);\n  }\n  get _selectNode() {\n    let select = domSymbolTree.parent(this);\n    if (!select) {\n      return null;\n    }\n\n    if (select.nodeName.toUpperCase() !== \"SELECT\") {\n      select = domSymbolTree.parent(select);\n      if (!select || select.nodeName.toUpperCase() !== \"SELECT\") {\n        return null;\n      }\n    }\n    return select;\n  }\n  get form() {\n    return closest(this, \"form\");\n  }\n  get text() {\n    // TODO is not correctly excluding script and SVG script descendants\n    return stripAndCollapseASCIIWhitespace(this.textContent);\n  }\n  set text(V) {\n    this.textContent = V;\n  }\n\n  get value() {\n    return this.hasAttribute(\"value\") ? this.getAttribute(\"value\") : this.text;\n  }\n  set value(val) {\n    this.setAttribute(\"value\", val);\n  }\n  get index() {\n    const select = closest(this, \"select\");\n    if (select === null) {\n      return 0;\n    }\n\n    return select.options.indexOf(this);\n  }\n  get selected() {\n    return this._selectedness;\n  }\n  set selected(s) {\n    this._dirtyness = true;\n    this._selectedness = Boolean(s);\n    if (this._selectedness) {\n      this._removeOtherSelectedness();\n    }\n    this._askForAReset();\n  }\n\n  // TODO this is quite wrong\n  get label() {\n    if (this.hasAttribute(\"label\")) {\n      return this.getAttribute(\"label\");\n    }\n    const select = this._selectNode;\n    if (select) {\n      return select.getAttribute(\"label\");\n    }\n    return null;\n  }\n\n  set label(V) {\n    const select = this._selectNode;\n    if (select) {\n      select.setAttribute(\"label\", V);\n    }\n  }\n}\n\nmodule.exports = {\n  implementation: HTMLOptionElementImpl\n};\n"]},"metadata":{},"sourceType":"script"}