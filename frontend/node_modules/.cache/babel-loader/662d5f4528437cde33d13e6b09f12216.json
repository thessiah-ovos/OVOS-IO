{"ast":null,"code":"import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import CheckoutSteps from'../components/CheckoutSteps';import{createOrder}from'../actions/orderActions';function PlaceOrderScreen(props){var cart=useSelector(function(state){return state.cart;});var orderCreate=useSelector(function(state){return state.orderCreate;});var loading=orderCreate.loading,success=orderCreate.success,error=orderCreate.error,order=orderCreate.order;var cartItems=cart.cartItems,payment=cart.payment;if(!payment.paymentMethod){props.history.push(\"/payment\");}var itemsPrice=cartItems.reduce(function(a,c){return a+c.price*1;},0);var billingPrice=itemsPrice>100?0:10;var taxPrice=0;var totalPrice=itemsPrice+billingPrice+taxPrice;var dispatch=useDispatch();var placeOrderHandler=function placeOrderHandler(){// create an order\ndispatch(createOrder({orderItems:cartItems,payment:payment,itemsPrice:itemsPrice,billingPrice:billingPrice,taxPrice:taxPrice,totalPrice:totalPrice}));};useEffect(function(){if(success){props.history.push(\"/order/\"+order._id);}},[success]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(CheckoutSteps,{step1:true,step2:true,step3:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder\"},/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder-info\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Payment\"),/*#__PURE__*/React.createElement(\"div\",null,\"Payment Method: \",cart.payment.paymentMethod)),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"ul\",{className:\"cart-list-container\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Shopping Cart\"),/*#__PURE__*/React.createElement(\"div\",null,\"Price\")),cartItems.length===0?/*#__PURE__*/React.createElement(\"div\",null,\"Cart is empty\"):cartItems.map(function(item){return/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"cart-image\"},/*#__PURE__*/React.createElement(\"img\",{src:item.image,alt:\"product\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"cart-name\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Link,{to:\"/product/\"+item.product},item.name)),/*#__PURE__*/React.createElement(\"div\",null,\"Lease: \",item.lease)),/*#__PURE__*/React.createElement(\"div\",{className:\"cart-price\"},\"$\",item.price));})))),/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder-action\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"button primary full-width\",onClick:placeOrderHandler},\"Place Order\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Order Summary\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Total Cost\"),\"$\",totalPrice)))));}export default PlaceOrderScreen;","map":{"version":3,"sources":["/mnt/c/Users/riche/ThessianSound/ThessianSoundLLC/frontend/src/screens/PlaceOrderScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Link","CheckoutSteps","createOrder","PlaceOrderScreen","props","cart","state","orderCreate","loading","success","error","order","cartItems","payment","paymentMethod","history","push","itemsPrice","reduce","a","c","price","billingPrice","taxPrice","totalPrice","dispatch","placeOrderHandler","orderItems","_id","length","map","item","image","product","name","lease"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport CheckoutSteps from '../components/CheckoutSteps';\r\nimport { createOrder } from '../actions/orderActions';\r\nfunction PlaceOrderScreen(props) {\r\n\r\n  const cart = useSelector(state => state.cart);\r\n  const orderCreate = useSelector(state => state.orderCreate);\r\n  const { loading, success, error, order } = orderCreate;\r\n\r\n  const { cartItems, payment } = cart;\r\n  if (!payment.paymentMethod) {\r\n    props.history.push(\"/payment\");\r\n  }\r\n  const itemsPrice = cartItems.reduce((a, c) => a + c.price * 1, 0);\r\n  const billingPrice = itemsPrice > 100 ? 0 : 10;\r\n  const taxPrice = 0;\r\n  const totalPrice = itemsPrice + billingPrice + taxPrice;\r\n \r\n  const dispatch = useDispatch();\r\n\r\n  const placeOrderHandler = () => {\r\n    // create an order\r\n    \r\n    dispatch(createOrder({\r\n      orderItems: cartItems, payment, itemsPrice, billingPrice, \r\n      taxPrice, totalPrice\r\n    }));\r\n  }\r\n  useEffect(() => {\r\n    if (success) {\r\n      props.history.push(\"/order/\" + order._id);\r\n    }\r\n\r\n  }, [success]);\r\n\r\n  return <div>\r\n    <CheckoutSteps step1 step2 step3 ></CheckoutSteps>\r\n    <div className=\"placeorder\">\r\n      <div className=\"placeorder-info\">\r\n        <div>\r\n          <h3>Payment</h3>\r\n          <div>\r\n            Payment Method: {cart.payment.paymentMethod}\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <ul className=\"cart-list-container\">\r\n            <li>\r\n              <h3>\r\n                Shopping Cart\r\n          </h3>\r\n              <div>\r\n                Price\r\n          </div>\r\n            </li>\r\n            {\r\n              cartItems.length === 0 ?\r\n                <div>\r\n                  Cart is empty\r\n          </div>\r\n                :\r\n                cartItems.map(item =>\r\n                  <li>\r\n                    <div className=\"cart-image\">\r\n                      <img src={item.image} alt=\"product\" />\r\n                    </div>\r\n                    <div className=\"cart-name\">\r\n                      <div>\r\n                        <Link to={\"/product/\" + item.product}>\r\n                          {item.name}\r\n                        </Link>\r\n\r\n                      </div>\r\n                      <div>\r\n                        Lease: {item.lease}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"cart-price\">\r\n                      ${item.price}\r\n                    </div>\r\n                  </li>\r\n                )\r\n            }\r\n          </ul>\r\n        </div>\r\n\r\n      \r\n      </div>\r\n      <div className=\"placeorder-action\">\r\n        <ul>\r\n          <li>\r\n            <button className=\"button primary full-width\" onClick={placeOrderHandler} >Place Order</button>\r\n          </li>\r\n          <li>\r\n            <h3>Order Summary</h3>\r\n          </li>\r\n          <li>\r\n            <div>Total Cost</div>\r\n             ${totalPrice}\r\n          </li>\r\n        </ul>\r\n\r\n\r\n\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n}\r\n\r\nexport default PlaceOrderScreen;"]},"metadata":{},"sourceType":"module"}