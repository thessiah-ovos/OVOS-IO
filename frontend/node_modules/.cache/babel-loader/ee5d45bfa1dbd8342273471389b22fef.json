{"ast":null,"code":"\"use strict\";\n\nvar _createForOfIteratorHelper = require(\"/mnt/c/Users/riche/ThessianSound/ThessianSoundLLC/frontend/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\");\n\nvar hasOwnProp = Object.prototype.hasOwnProperty;\n\nvar namedPropertiesTracker = require(\"../named-properties-tracker\");\n\nvar NODE_TYPE = require(\"./node-type\");\n\nvar HTMLCollection = require(\"./generated/HTMLCollection\");\n\nvar _require = require(\"../utils\"),\n    treeOrderSorter = _require.treeOrderSorter;\n\nvar idlUtils = require(\"./generated/utils\");\n\nfunction isNamedPropertyElement(element) {\n  // (for the name attribute)\n  // use hasOwnProperty to make sure contentWindow comes from the prototype,\n  // and is not set directly on the node by a script.\n  if (\"contentWindow\" in element && !hasOwnProp.call(element, \"contentWindow\")) {\n    return true;\n  }\n\n  switch (element.nodeName) {\n    case \"A\":\n    case \"AREA\":\n    case \"EMBED\":\n    case \"FORM\":\n    case \"FRAMESET\":\n    case \"IMG\":\n    case \"OBJECT\":\n      return true;\n\n    default:\n      return false;\n  }\n}\n\nfunction namedPropertyResolver(window, name, values) {\n  function getResult() {\n    var results = [];\n\n    var _iterator = _createForOfIteratorHelper(values().keys()),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var node = _step.value;\n\n        if (node.nodeType !== NODE_TYPE.ELEMENT_NODE) {\n          continue;\n        }\n\n        if (node.getAttribute(\"id\") === name) {\n          results.push(node);\n        } else if (node.getAttribute(\"name\") === name && isNamedPropertyElement(node)) {\n          results.push(node);\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    results.sort(treeOrderSorter);\n    return results;\n  }\n\n  var document = window._document;\n  var objects = HTMLCollection.create([], {\n    element: idlUtils.implForWrapper(document.documentElement),\n    query: getResult\n  });\n  var length = objects.length;\n\n  for (var i = 0; i < length; ++i) {\n    var node = objects[i];\n\n    if (\"contentWindow\" in node && !hasOwnProp.call(node, \"contentWindow\") && node.getAttribute(\"name\") === name) {\n      return node.contentWindow;\n    }\n  }\n\n  if (length === 0) {\n    return undefined;\n  }\n\n  if (length === 1) {\n    return objects[0];\n  }\n\n  return objects;\n}\n\nexports.initializeWindow = function (window, windowProxy) {\n  namedPropertiesTracker.create(window, windowProxy, namedPropertyResolver.bind(null));\n};\n\nexports.elementAttributeModified = function (element, name, value, oldValue) {\n  if (!element._attached) {\n    return;\n  }\n\n  var useName = isNamedPropertyElement(element);\n\n  if (name === \"id\" || name === \"name\" && useName) {\n    var tracker = namedPropertiesTracker.get(element._ownerDocument._global); // (tracker will be null if the document has no Window)\n\n    if (tracker) {\n      if (name === \"id\" && (!useName || element.getAttribute(\"name\") !== oldValue)) {\n        tracker.untrack(oldValue, element);\n      }\n\n      if (name === \"name\" && element.getAttribute(\"id\") !== oldValue) {\n        tracker.untrack(oldValue, element);\n      }\n\n      tracker.track(value, element);\n    }\n  }\n};\n\nexports.nodeAttachedToDocument = function (node) {\n  if (node.nodeType !== NODE_TYPE.ELEMENT_NODE) {\n    return;\n  }\n\n  var tracker = namedPropertiesTracker.get(node._ownerDocument._global);\n\n  if (!tracker) {\n    return;\n  }\n\n  tracker.track(node.getAttribute(\"id\"), node);\n\n  if (isNamedPropertyElement(node)) {\n    tracker.track(node.getAttribute(\"name\"), node);\n  }\n};\n\nexports.nodeDetachedFromDocument = function (node) {\n  if (node.nodeType !== NODE_TYPE.ELEMENT_NODE) {\n    return;\n  }\n\n  var tracker = namedPropertiesTracker.get(node._ownerDocument._global);\n\n  if (!tracker) {\n    return;\n  }\n\n  tracker.untrack(node.getAttribute(\"id\"), node);\n\n  if (isNamedPropertyElement(node)) {\n    tracker.untrack(node.getAttribute(\"name\"), node);\n  }\n};","map":{"version":3,"sources":["/mnt/c/Users/riche/ThessianSound/ThessianSoundLLC/frontend/node_modules/jsdom/lib/jsdom/living/named-properties-window.js"],"names":["hasOwnProp","Object","prototype","hasOwnProperty","namedPropertiesTracker","require","NODE_TYPE","HTMLCollection","treeOrderSorter","idlUtils","isNamedPropertyElement","element","call","nodeName","namedPropertyResolver","window","name","values","getResult","results","keys","node","nodeType","ELEMENT_NODE","getAttribute","push","sort","document","_document","objects","create","implForWrapper","documentElement","query","length","i","contentWindow","undefined","exports","initializeWindow","windowProxy","bind","elementAttributeModified","value","oldValue","_attached","useName","tracker","get","_ownerDocument","_global","untrack","track","nodeAttachedToDocument","nodeDetachedFromDocument"],"mappings":"AAAA;;;;AACA,IAAMA,UAAU,GAAGC,MAAM,CAACC,SAAP,CAAiBC,cAApC;;AACA,IAAMC,sBAAsB,GAAGC,OAAO,CAAC,6BAAD,CAAtC;;AACA,IAAMC,SAAS,GAAGD,OAAO,CAAC,aAAD,CAAzB;;AACA,IAAME,cAAc,GAAGF,OAAO,CAAC,4BAAD,CAA9B;;eAC4BA,OAAO,CAAC,UAAD,C;IAA3BG,e,YAAAA,e;;AACR,IAAMC,QAAQ,GAAGJ,OAAO,CAAC,mBAAD,CAAxB;;AAEA,SAASK,sBAAT,CAAgCC,OAAhC,EAAyC;AACvC;AAEA;AACA;AACA,MAAI,mBAAmBA,OAAnB,IAA8B,CAACX,UAAU,CAACY,IAAX,CAAgBD,OAAhB,EAAyB,eAAzB,CAAnC,EAA8E;AAC5E,WAAO,IAAP;AACD;;AAED,UAAQA,OAAO,CAACE,QAAhB;AACE,SAAK,GAAL;AACA,SAAK,MAAL;AACA,SAAK,OAAL;AACA,SAAK,MAAL;AACA,SAAK,UAAL;AACA,SAAK,KAAL;AACA,SAAK,QAAL;AACE,aAAO,IAAP;;AACF;AACE,aAAO,KAAP;AAVJ;AAYD;;AAED,SAASC,qBAAT,CAA+BC,MAA/B,EAAuCC,IAAvC,EAA6CC,MAA7C,EAAqD;AACnD,WAASC,SAAT,GAAqB;AACnB,QAAMC,OAAO,GAAG,EAAhB;;AADmB,+CAGAF,MAAM,GAAGG,IAAT,EAHA;AAAA;;AAAA;AAGnB,0DAAoC;AAAA,YAAzBC,IAAyB;;AAClC,YAAIA,IAAI,CAACC,QAAL,KAAkBhB,SAAS,CAACiB,YAAhC,EAA8C;AAC5C;AACD;;AAED,YAAIF,IAAI,CAACG,YAAL,CAAkB,IAAlB,MAA4BR,IAAhC,EAAsC;AACpCG,UAAAA,OAAO,CAACM,IAAR,CAAaJ,IAAb;AACD,SAFD,MAEO,IAAIA,IAAI,CAACG,YAAL,CAAkB,MAAlB,MAA8BR,IAA9B,IAAsCN,sBAAsB,CAACW,IAAD,CAAhE,EAAwE;AAC7EF,UAAAA,OAAO,CAACM,IAAR,CAAaJ,IAAb;AACD;AACF;AAbkB;AAAA;AAAA;AAAA;AAAA;;AAenBF,IAAAA,OAAO,CAACO,IAAR,CAAalB,eAAb;AAEA,WAAOW,OAAP;AACD;;AAED,MAAMQ,QAAQ,GAAGZ,MAAM,CAACa,SAAxB;AACA,MAAMC,OAAO,GAAGtB,cAAc,CAACuB,MAAf,CAAsB,EAAtB,EAA0B;AACxCnB,IAAAA,OAAO,EAAEF,QAAQ,CAACsB,cAAT,CAAwBJ,QAAQ,CAACK,eAAjC,CAD+B;AAExCC,IAAAA,KAAK,EAAEf;AAFiC,GAA1B,CAAhB;AAtBmD,MA2B3CgB,MA3B2C,GA2BhCL,OA3BgC,CA2B3CK,MA3B2C;;AA4BnD,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,MAApB,EAA4B,EAAEC,CAA9B,EAAiC;AAC/B,QAAMd,IAAI,GAAGQ,OAAO,CAACM,CAAD,CAApB;;AAEA,QAAI,mBAAmBd,IAAnB,IAA2B,CAACrB,UAAU,CAACY,IAAX,CAAgBS,IAAhB,EAAsB,eAAtB,CAA5B,IACDA,IAAI,CAACG,YAAL,CAAkB,MAAlB,MAA8BR,IADjC,EACuC;AACrC,aAAOK,IAAI,CAACe,aAAZ;AACD;AACF;;AAED,MAAIF,MAAM,KAAK,CAAf,EAAkB;AAChB,WAAOG,SAAP;AACD;;AAED,MAAIH,MAAM,KAAK,CAAf,EAAkB;AAChB,WAAOL,OAAO,CAAC,CAAD,CAAd;AACD;;AAED,SAAOA,OAAP;AACD;;AAEDS,OAAO,CAACC,gBAAR,GAA2B,UAAUxB,MAAV,EAAkByB,WAAlB,EAA+B;AACxDpC,EAAAA,sBAAsB,CAAC0B,MAAvB,CAA8Bf,MAA9B,EAAsCyB,WAAtC,EAAmD1B,qBAAqB,CAAC2B,IAAtB,CAA2B,IAA3B,CAAnD;AACD,CAFD;;AAIAH,OAAO,CAACI,wBAAR,GAAmC,UAAU/B,OAAV,EAAmBK,IAAnB,EAAyB2B,KAAzB,EAAgCC,QAAhC,EAA0C;AAC3E,MAAI,CAACjC,OAAO,CAACkC,SAAb,EAAwB;AACtB;AACD;;AAED,MAAMC,OAAO,GAAGpC,sBAAsB,CAACC,OAAD,CAAtC;;AAEA,MAAIK,IAAI,KAAK,IAAT,IAAkBA,IAAI,KAAK,MAAT,IAAmB8B,OAAzC,EAAmD;AACjD,QAAMC,OAAO,GAAG3C,sBAAsB,CAAC4C,GAAvB,CAA2BrC,OAAO,CAACsC,cAAR,CAAuBC,OAAlD,CAAhB,CADiD,CAGjD;;AACA,QAAIH,OAAJ,EAAa;AACX,UAAI/B,IAAI,KAAK,IAAT,KAAkB,CAAC8B,OAAD,IAAYnC,OAAO,CAACa,YAAR,CAAqB,MAArB,MAAiCoB,QAA/D,CAAJ,EAA8E;AAC5EG,QAAAA,OAAO,CAACI,OAAR,CAAgBP,QAAhB,EAA0BjC,OAA1B;AACD;;AAED,UAAIK,IAAI,KAAK,MAAT,IAAmBL,OAAO,CAACa,YAAR,CAAqB,IAArB,MAA+BoB,QAAtD,EAAgE;AAC9DG,QAAAA,OAAO,CAACI,OAAR,CAAgBP,QAAhB,EAA0BjC,OAA1B;AACD;;AAEDoC,MAAAA,OAAO,CAACK,KAAR,CAAcT,KAAd,EAAqBhC,OAArB;AACD;AACF;AACF,CAvBD;;AAyBA2B,OAAO,CAACe,sBAAR,GAAiC,UAAUhC,IAAV,EAAgB;AAC/C,MAAIA,IAAI,CAACC,QAAL,KAAkBhB,SAAS,CAACiB,YAAhC,EAA8C;AAC5C;AACD;;AAED,MAAMwB,OAAO,GAAG3C,sBAAsB,CAAC4C,GAAvB,CAA2B3B,IAAI,CAAC4B,cAAL,CAAoBC,OAA/C,CAAhB;;AACA,MAAI,CAACH,OAAL,EAAc;AACZ;AACD;;AAEDA,EAAAA,OAAO,CAACK,KAAR,CAAc/B,IAAI,CAACG,YAAL,CAAkB,IAAlB,CAAd,EAAuCH,IAAvC;;AAEA,MAAIX,sBAAsB,CAACW,IAAD,CAA1B,EAAkC;AAChC0B,IAAAA,OAAO,CAACK,KAAR,CAAc/B,IAAI,CAACG,YAAL,CAAkB,MAAlB,CAAd,EAAyCH,IAAzC;AACD;AACF,CAfD;;AAiBAiB,OAAO,CAACgB,wBAAR,GAAmC,UAAUjC,IAAV,EAAgB;AACjD,MAAIA,IAAI,CAACC,QAAL,KAAkBhB,SAAS,CAACiB,YAAhC,EAA8C;AAC5C;AACD;;AAED,MAAMwB,OAAO,GAAG3C,sBAAsB,CAAC4C,GAAvB,CAA2B3B,IAAI,CAAC4B,cAAL,CAAoBC,OAA/C,CAAhB;;AACA,MAAI,CAACH,OAAL,EAAc;AACZ;AACD;;AAEDA,EAAAA,OAAO,CAACI,OAAR,CAAgB9B,IAAI,CAACG,YAAL,CAAkB,IAAlB,CAAhB,EAAyCH,IAAzC;;AAEA,MAAIX,sBAAsB,CAACW,IAAD,CAA1B,EAAkC;AAChC0B,IAAAA,OAAO,CAACI,OAAR,CAAgB9B,IAAI,CAACG,YAAL,CAAkB,MAAlB,CAAhB,EAA2CH,IAA3C;AACD;AACF,CAfD","sourcesContent":["\"use strict\";\nconst hasOwnProp = Object.prototype.hasOwnProperty;\nconst namedPropertiesTracker = require(\"../named-properties-tracker\");\nconst NODE_TYPE = require(\"./node-type\");\nconst HTMLCollection = require(\"./generated/HTMLCollection\");\nconst { treeOrderSorter } = require(\"../utils\");\nconst idlUtils = require(\"./generated/utils\");\n\nfunction isNamedPropertyElement(element) {\n  // (for the name attribute)\n\n  // use hasOwnProperty to make sure contentWindow comes from the prototype,\n  // and is not set directly on the node by a script.\n  if (\"contentWindow\" in element && !hasOwnProp.call(element, \"contentWindow\")) {\n    return true;\n  }\n\n  switch (element.nodeName) {\n    case \"A\":\n    case \"AREA\":\n    case \"EMBED\":\n    case \"FORM\":\n    case \"FRAMESET\":\n    case \"IMG\":\n    case \"OBJECT\":\n      return true;\n    default:\n      return false;\n  }\n}\n\nfunction namedPropertyResolver(window, name, values) {\n  function getResult() {\n    const results = [];\n\n    for (const node of values().keys()) {\n      if (node.nodeType !== NODE_TYPE.ELEMENT_NODE) {\n        continue;\n      }\n\n      if (node.getAttribute(\"id\") === name) {\n        results.push(node);\n      } else if (node.getAttribute(\"name\") === name && isNamedPropertyElement(node)) {\n        results.push(node);\n      }\n    }\n\n    results.sort(treeOrderSorter);\n\n    return results;\n  }\n\n  const document = window._document;\n  const objects = HTMLCollection.create([], {\n    element: idlUtils.implForWrapper(document.documentElement),\n    query: getResult\n  });\n\n  const { length } = objects;\n  for (let i = 0; i < length; ++i) {\n    const node = objects[i];\n\n    if (\"contentWindow\" in node && !hasOwnProp.call(node, \"contentWindow\") &&\n       node.getAttribute(\"name\") === name) {\n      return node.contentWindow;\n    }\n  }\n\n  if (length === 0) {\n    return undefined;\n  }\n\n  if (length === 1) {\n    return objects[0];\n  }\n\n  return objects;\n}\n\nexports.initializeWindow = function (window, windowProxy) {\n  namedPropertiesTracker.create(window, windowProxy, namedPropertyResolver.bind(null));\n};\n\nexports.elementAttributeModified = function (element, name, value, oldValue) {\n  if (!element._attached) {\n    return;\n  }\n\n  const useName = isNamedPropertyElement(element);\n\n  if (name === \"id\" || (name === \"name\" && useName)) {\n    const tracker = namedPropertiesTracker.get(element._ownerDocument._global);\n\n    // (tracker will be null if the document has no Window)\n    if (tracker) {\n      if (name === \"id\" && (!useName || element.getAttribute(\"name\") !== oldValue)) {\n        tracker.untrack(oldValue, element);\n      }\n\n      if (name === \"name\" && element.getAttribute(\"id\") !== oldValue) {\n        tracker.untrack(oldValue, element);\n      }\n\n      tracker.track(value, element);\n    }\n  }\n};\n\nexports.nodeAttachedToDocument = function (node) {\n  if (node.nodeType !== NODE_TYPE.ELEMENT_NODE) {\n    return;\n  }\n\n  const tracker = namedPropertiesTracker.get(node._ownerDocument._global);\n  if (!tracker) {\n    return;\n  }\n\n  tracker.track(node.getAttribute(\"id\"), node);\n\n  if (isNamedPropertyElement(node)) {\n    tracker.track(node.getAttribute(\"name\"), node);\n  }\n};\n\nexports.nodeDetachedFromDocument = function (node) {\n  if (node.nodeType !== NODE_TYPE.ELEMENT_NODE) {\n    return;\n  }\n\n  const tracker = namedPropertiesTracker.get(node._ownerDocument._global);\n  if (!tracker) {\n    return;\n  }\n\n  tracker.untrack(node.getAttribute(\"id\"), node);\n\n  if (isNamedPropertyElement(node)) {\n    tracker.untrack(node.getAttribute(\"name\"), node);\n  }\n};\n"]},"metadata":{},"sourceType":"script"}