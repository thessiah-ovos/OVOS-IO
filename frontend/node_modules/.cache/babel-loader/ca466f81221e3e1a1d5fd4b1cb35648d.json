{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"/mnt/c/Users/riche/ThessianSound/ThessianSoundLLC/frontend/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/mnt/c/Users/riche/ThessianSound/ThessianSoundLLC/frontend/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _get = require(\"/mnt/c/Users/riche/ThessianSound/ThessianSoundLLC/frontend/node_modules/@babel/runtime/helpers/get\");\n\nvar _getPrototypeOf = require(\"/mnt/c/Users/riche/ThessianSound/ThessianSoundLLC/frontend/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/mnt/c/Users/riche/ThessianSound/ThessianSoundLLC/frontend/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _createSuper = require(\"/mnt/c/Users/riche/ThessianSound/ThessianSoundLLC/frontend/node_modules/@babel/runtime/helpers/createSuper\");\n\nvar MIMEType = require(\"whatwg-mimetype\");\n\nvar _require = require(\"whatwg-url\"),\n    parseURL = _require.parseURL,\n    serializeURL = _require.serializeURL;\n\nvar _require2 = require(\"../window/navigation\"),\n    evaluateJavaScriptURL = _require2.evaluateJavaScriptURL;\n\nvar HTMLElementImpl = require(\"./HTMLElement-impl\").implementation;\n\nvar _require3 = require(\"../../browser/documentfeatures\"),\n    applyDocumentFeatures = _require3.applyDocumentFeatures;\n\nvar resourceLoader = require(\"../../browser/resource-loader\");\n\nvar _require4 = require(\"../../utils\"),\n    defineGetter = _require4.defineGetter,\n    reflectURLAttribute = _require4.reflectURLAttribute;\n\nvar _require5 = require(\"../helpers/document-base-url\"),\n    documentBaseURL = _require5.documentBaseURL;\n\nvar _require6 = require(\"../attributes\"),\n    getAttributeValue = _require6.getAttributeValue;\n\nvar idlUtils = require(\"../generated/utils\");\n\nfunction loadFrame(frame) {\n  if (frame._contentDocument) {\n    if (frame._contentDocument._defaultView) {\n      // close calls delete on its document.\n      frame._contentDocument._defaultView.close();\n    } else {\n      delete frame._contentDocument;\n    }\n  }\n\n  var parentDoc = frame._ownerDocument; // https://html.spec.whatwg.org/#process-the-iframe-attributes\n\n  var url;\n  var srcAttribute = getAttributeValue(frame, \"src\");\n\n  if (srcAttribute === \"\") {\n    url = parseURL(\"about:blank\");\n  } else {\n    url = parseURL(srcAttribute, {\n      baseURL: documentBaseURL(parentDoc) || undefined\n    }) || parseURL(\"about:blank\");\n  }\n\n  var serializedURL = serializeURL(url); // This is not great, but prevents a require cycle during webidl2js generation\n\n  var wnd = new parentDoc._defaultView.constructor({\n    parsingMode: \"html\",\n    url: url.scheme === \"javascript\" || serializedURL === \"about:blank\" ? parentDoc.URL : serializedURL,\n    resourceLoader: parentDoc._customResourceLoader,\n    userAgent: parentDoc._defaultView.navigator.userAgent,\n    referrer: parentDoc.URL,\n    cookieJar: parentDoc._cookieJar,\n    pool: parentDoc._pool,\n    encoding: parentDoc._encoding,\n    agentOptions: parentDoc._agentOptions,\n    strictSSL: parentDoc._strictSSL,\n    proxy: parentDoc._proxy,\n    runScripts: parentDoc._defaultView._runScripts,\n    commonForOrigin: parentDoc._defaultView._commonForOrigin\n  });\n  var contentDoc = frame._contentDocument = idlUtils.implForWrapper(wnd._document);\n  applyDocumentFeatures(contentDoc, parentDoc._implementation._features);\n  var parent = parentDoc._defaultView;\n  var contentWindow = contentDoc._defaultView;\n  contentWindow._parent = parent;\n  contentWindow._top = parent.top;\n  contentWindow._frameElement = frame;\n  contentWindow._virtualConsole = parent._virtualConsole;\n\n  if (parentDoc.origin === contentDoc.origin) {\n    contentWindow._currentOriginData.windowsInSameOrigin.push(contentWindow);\n  } // Handle about:blank with a simulated load of an empty document.\n\n\n  if (serializedURL === \"about:blank\") {\n    // Cannot be done inside the enqueued callback; the documentElement etc. need to be immediately available.\n    contentDoc.write(\"<html><head></head><body></body></html>\");\n    contentDoc.close();\n    resourceLoader.enqueue(frame)(); // to fire the load event\n  } else if (url.scheme === \"javascript\") {\n    // Cannot be done inside the enqueued callback; the documentElement etc. need to be immediately available.\n    contentDoc.write(\"<html><head></head><body></body></html>\");\n    contentDoc.close();\n    var result = evaluateJavaScriptURL(contentWindow, url);\n\n    if (typeof result === \"string\") {\n      contentDoc.body.textContent = result;\n    }\n\n    resourceLoader.enqueue(frame)(); // to fire the load event\n  } else {\n    resourceLoader.load(frame, serializedURL, {\n      defaultEncoding: parentDoc._encoding,\n      detectMetaCharset: true\n    }, function (html, responseURL, response) {\n      if (response) {\n        var contentType = MIMEType.parse(response.headers[\"content-type\"]);\n\n        if (contentType) {\n          if (contentType.isXML()) {\n            contentDoc._parsingMode = \"xml\";\n          }\n\n          contentDoc.contentType = contentType.essence;\n          contentDoc._encoding = contentType.parameters.get(\"charset\");\n        }\n      }\n\n      contentDoc.write(html);\n      contentDoc.close();\n    });\n  }\n}\n\nfunction refreshAccessors(document) {\n  var window = document._defaultView;\n\n  if (!window) {\n    return;\n  }\n\n  var frames = document.querySelectorAll(\"iframe,frame\"); // delete accessors for all frames\n\n  for (var i = 0; i < window._length; ++i) {\n    delete window[i];\n  }\n\n  window._length = frames.length;\n  Array.prototype.forEach.call(frames, function (frame, i) {\n    defineGetter(window, i, function () {\n      return frame.contentWindow;\n    });\n  });\n}\n\nvar HTMLFrameElementImpl = /*#__PURE__*/function (_HTMLElementImpl) {\n  _inherits(HTMLFrameElementImpl, _HTMLElementImpl);\n\n  var _super = _createSuper(HTMLFrameElementImpl);\n\n  function HTMLFrameElementImpl(args, privateData) {\n    var _this;\n\n    _classCallCheck(this, HTMLFrameElementImpl);\n\n    _this = _super.call(this, args, privateData);\n    _this._contentDocument = null;\n    return _this;\n  }\n\n  _createClass(HTMLFrameElementImpl, [{\n    key: \"_attrModified\",\n    value: function _attrModified(name, value, oldVal) {\n      _get(_getPrototypeOf(HTMLFrameElementImpl.prototype), \"_attrModified\", this).call(this, name, value, oldVal);\n\n      if (name === \"src\") {\n        // iframe should never load in a document without a Window\n        // (e.g. implementation.createHTMLDocument)\n        if (this._attached && this._ownerDocument._defaultView) {\n          loadFrame(this);\n        }\n      }\n    }\n  }, {\n    key: \"_detach\",\n    value: function _detach() {\n      _get(_getPrototypeOf(HTMLFrameElementImpl.prototype), \"_detach\", this).call(this);\n\n      if (this.contentWindow) {\n        this.contentWindow.close();\n      }\n\n      refreshAccessors(this._ownerDocument);\n    }\n  }, {\n    key: \"_attach\",\n    value: function _attach() {\n      _get(_getPrototypeOf(HTMLFrameElementImpl.prototype), \"_attach\", this).call(this);\n\n      if (this._ownerDocument._defaultView) {\n        loadFrame(this);\n      }\n\n      refreshAccessors(this._ownerDocument);\n    }\n  }, {\n    key: \"contentDocument\",\n    get: function get() {\n      return this._contentDocument;\n    }\n  }, {\n    key: \"contentWindow\",\n    get: function get() {\n      return this.contentDocument ? this.contentDocument._defaultView : null;\n    }\n  }, {\n    key: \"src\",\n    get: function get() {\n      return reflectURLAttribute(this, \"src\");\n    },\n    set: function set(value) {\n      this.setAttribute(\"src\", value);\n    }\n  }, {\n    key: \"longDesc\",\n    get: function get() {\n      return reflectURLAttribute(this, \"longdesc\");\n    },\n    set: function set(value) {\n      this.setAttribute(\"longdesc\", value);\n    }\n  }]);\n\n  return HTMLFrameElementImpl;\n}(HTMLElementImpl);\n\nmodule.exports = {\n  implementation: HTMLFrameElementImpl\n};","map":{"version":3,"sources":["/mnt/c/Users/riche/ThessianSound/ThessianSoundLLC/frontend/node_modules/jsdom/lib/jsdom/living/nodes/HTMLFrameElement-impl.js"],"names":["MIMEType","require","parseURL","serializeURL","evaluateJavaScriptURL","HTMLElementImpl","implementation","applyDocumentFeatures","resourceLoader","defineGetter","reflectURLAttribute","documentBaseURL","getAttributeValue","idlUtils","loadFrame","frame","_contentDocument","_defaultView","close","parentDoc","_ownerDocument","url","srcAttribute","baseURL","undefined","serializedURL","wnd","constructor","parsingMode","scheme","URL","_customResourceLoader","userAgent","navigator","referrer","cookieJar","_cookieJar","pool","_pool","encoding","_encoding","agentOptions","_agentOptions","strictSSL","_strictSSL","proxy","_proxy","runScripts","_runScripts","commonForOrigin","_commonForOrigin","contentDoc","implForWrapper","_document","_implementation","_features","parent","contentWindow","_parent","_top","top","_frameElement","_virtualConsole","origin","_currentOriginData","windowsInSameOrigin","push","write","enqueue","result","body","textContent","load","defaultEncoding","detectMetaCharset","html","responseURL","response","contentType","parse","headers","isXML","_parsingMode","essence","parameters","get","refreshAccessors","document","window","frames","querySelectorAll","i","_length","length","Array","prototype","forEach","call","HTMLFrameElementImpl","args","privateData","name","value","oldVal","_attached","contentDocument","setAttribute","module","exports"],"mappings":"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","sourcesContent":["\"use strict\";\nconst MIMEType = require(\"whatwg-mimetype\");\nconst { parseURL, serializeURL } = require(\"whatwg-url\");\nconst { evaluateJavaScriptURL } = require(\"../window/navigation\");\nconst HTMLElementImpl = require(\"./HTMLElement-impl\").implementation;\nconst { applyDocumentFeatures } = require(\"../../browser/documentfeatures\");\nconst resourceLoader = require(\"../../browser/resource-loader\");\nconst { defineGetter, reflectURLAttribute } = require(\"../../utils\");\nconst { documentBaseURL } = require(\"../helpers/document-base-url\");\nconst { getAttributeValue } = require(\"../attributes\");\nconst idlUtils = require(\"../generated/utils\");\n\nfunction loadFrame(frame) {\n  if (frame._contentDocument) {\n    if (frame._contentDocument._defaultView) {\n      // close calls delete on its document.\n      frame._contentDocument._defaultView.close();\n    } else {\n      delete frame._contentDocument;\n    }\n  }\n\n  const parentDoc = frame._ownerDocument;\n\n  // https://html.spec.whatwg.org/#process-the-iframe-attributes\n  let url;\n  const srcAttribute = getAttributeValue(frame, \"src\");\n  if (srcAttribute === \"\") {\n    url = parseURL(\"about:blank\");\n  } else {\n    url = parseURL(srcAttribute, { baseURL: documentBaseURL(parentDoc) || undefined }) || parseURL(\"about:blank\");\n  }\n  const serializedURL = serializeURL(url);\n\n  // This is not great, but prevents a require cycle during webidl2js generation\n  const wnd = new parentDoc._defaultView.constructor({\n    parsingMode: \"html\",\n    url: url.scheme === \"javascript\" || serializedURL === \"about:blank\" ? parentDoc.URL : serializedURL,\n    resourceLoader: parentDoc._customResourceLoader,\n    userAgent: parentDoc._defaultView.navigator.userAgent,\n    referrer: parentDoc.URL,\n    cookieJar: parentDoc._cookieJar,\n    pool: parentDoc._pool,\n    encoding: parentDoc._encoding,\n    agentOptions: parentDoc._agentOptions,\n    strictSSL: parentDoc._strictSSL,\n    proxy: parentDoc._proxy,\n    runScripts: parentDoc._defaultView._runScripts,\n    commonForOrigin: parentDoc._defaultView._commonForOrigin\n  });\n  const contentDoc = frame._contentDocument = idlUtils.implForWrapper(wnd._document);\n  applyDocumentFeatures(contentDoc, parentDoc._implementation._features);\n\n  const parent = parentDoc._defaultView;\n  const contentWindow = contentDoc._defaultView;\n  contentWindow._parent = parent;\n  contentWindow._top = parent.top;\n  contentWindow._frameElement = frame;\n  contentWindow._virtualConsole = parent._virtualConsole;\n\n  if (parentDoc.origin === contentDoc.origin) {\n    contentWindow._currentOriginData.windowsInSameOrigin.push(contentWindow);\n  }\n\n  // Handle about:blank with a simulated load of an empty document.\n  if (serializedURL === \"about:blank\") {\n    // Cannot be done inside the enqueued callback; the documentElement etc. need to be immediately available.\n    contentDoc.write(\"<html><head></head><body></body></html>\");\n    contentDoc.close();\n    resourceLoader.enqueue(frame)(); // to fire the load event\n  } else if (url.scheme === \"javascript\") {\n    // Cannot be done inside the enqueued callback; the documentElement etc. need to be immediately available.\n    contentDoc.write(\"<html><head></head><body></body></html>\");\n    contentDoc.close();\n    const result = evaluateJavaScriptURL(contentWindow, url);\n    if (typeof result === \"string\") {\n      contentDoc.body.textContent = result;\n    }\n    resourceLoader.enqueue(frame)(); // to fire the load event\n  } else {\n    resourceLoader.load(\n      frame,\n      serializedURL,\n      { defaultEncoding: parentDoc._encoding, detectMetaCharset: true },\n      (html, responseURL, response) => {\n        if (response) {\n          const contentType = MIMEType.parse(response.headers[\"content-type\"]);\n          if (contentType) {\n            if (contentType.isXML()) {\n              contentDoc._parsingMode = \"xml\";\n            }\n            contentDoc.contentType = contentType.essence;\n            contentDoc._encoding = contentType.parameters.get(\"charset\");\n          }\n        }\n        contentDoc.write(html);\n        contentDoc.close();\n      }\n    );\n  }\n}\n\nfunction refreshAccessors(document) {\n  const window = document._defaultView;\n\n  if (!window) {\n    return;\n  }\n\n  const frames = document.querySelectorAll(\"iframe,frame\");\n\n  // delete accessors for all frames\n  for (let i = 0; i < window._length; ++i) {\n    delete window[i];\n  }\n\n  window._length = frames.length;\n  Array.prototype.forEach.call(frames, (frame, i) => {\n    defineGetter(window, i, () => frame.contentWindow);\n  });\n}\n\nclass HTMLFrameElementImpl extends HTMLElementImpl {\n  constructor(args, privateData) {\n    super(args, privateData);\n    this._contentDocument = null;\n  }\n  _attrModified(name, value, oldVal) {\n    super._attrModified(name, value, oldVal);\n    if (name === \"src\") {\n      // iframe should never load in a document without a Window\n      // (e.g. implementation.createHTMLDocument)\n      if (this._attached && this._ownerDocument._defaultView) {\n        loadFrame(this);\n      }\n    }\n  }\n\n  _detach() {\n    super._detach();\n\n    if (this.contentWindow) {\n      this.contentWindow.close();\n    }\n\n    refreshAccessors(this._ownerDocument);\n  }\n\n  _attach() {\n    super._attach();\n\n    if (this._ownerDocument._defaultView) {\n      loadFrame(this);\n    }\n    refreshAccessors(this._ownerDocument);\n  }\n\n  get contentDocument() {\n    return this._contentDocument;\n  }\n\n  get contentWindow() {\n    return this.contentDocument ? this.contentDocument._defaultView : null;\n  }\n\n  get src() {\n    return reflectURLAttribute(this, \"src\");\n  }\n\n  set src(value) {\n    this.setAttribute(\"src\", value);\n  }\n\n  get longDesc() {\n    return reflectURLAttribute(this, \"longdesc\");\n  }\n\n  set longDesc(value) {\n    this.setAttribute(\"longdesc\", value);\n  }\n}\n\nmodule.exports = {\n  implementation: HTMLFrameElementImpl\n};\n\n"]},"metadata":{},"sourceType":"script"}