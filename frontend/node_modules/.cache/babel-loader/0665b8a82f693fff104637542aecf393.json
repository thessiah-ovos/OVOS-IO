{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"/mnt/c/Users/riche/ThessianSound/ThessianSoundLLC/frontend/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/mnt/c/Users/riche/ThessianSound/ThessianSoundLLC/frontend/node_modules/@babel/runtime/helpers/createClass\");\n\nvar Document = require(\"../generated/Document\");\n\nvar _require = require(\"../../browser/documentfeatures\"),\n    applyDocumentFeatures = _require.applyDocumentFeatures;\n\nexports.implementation = /*#__PURE__*/function () {\n  function DOMParserImpl() {\n    _classCallCheck(this, DOMParserImpl);\n  }\n\n  _createClass(DOMParserImpl, [{\n    key: \"parseFromString\",\n    value: function parseFromString(string, contentType) {\n      switch (String(contentType)) {\n        case \"text/html\":\n          {\n            return createScriptingDisabledDocument(\"html\", contentType, string);\n          }\n\n        case \"text/xml\":\n        case \"application/xml\":\n        case \"application/xhtml+xml\":\n        case \"image/svg+xml\":\n          {\n            // TODO: use a strict XML parser (sax's strict mode might work?) and create parsererror elements\n            try {\n              return createScriptingDisabledDocument(\"xml\", contentType, string);\n            } catch (error) {\n              var document = createScriptingDisabledDocument(\"xml\", contentType);\n              var element = document.createElementNS(\"http://www.mozilla.org/newlayout/xml/parsererror.xml\", \"parsererror\");\n              element.textContent = error.message;\n              document.appendChild(element);\n              return document;\n            }\n          }\n\n        default:\n          throw new TypeError(\"Invalid contentType\");\n      }\n    }\n  }]);\n\n  return DOMParserImpl;\n}();\n\nfunction createScriptingDisabledDocument(parsingMode, contentType, string) {\n  var document = Document.createImpl([], {\n    options: {\n      parsingMode: parsingMode,\n      encoding: \"UTF-8\",\n      contentType: contentType // TODO: somehow set URL to active document's URL\n\n    }\n  }); // \"scripting enabled\" set to false\n\n  applyDocumentFeatures(document, {\n    FetchExternalResources: [],\n    SkipExternalResources: false\n  });\n\n  if (string !== undefined) {\n    document._htmlToDom.appendToDocument(string, document);\n  }\n\n  document.close();\n  return document;\n}","map":{"version":3,"sources":["/mnt/c/Users/riche/ThessianSound/ThessianSoundLLC/frontend/node_modules/jsdom/lib/jsdom/living/domparsing/DOMParser-impl.js"],"names":["Document","require","applyDocumentFeatures","exports","implementation","string","contentType","String","createScriptingDisabledDocument","error","document","element","createElementNS","textContent","message","appendChild","TypeError","parsingMode","createImpl","options","encoding","FetchExternalResources","SkipExternalResources","undefined","_htmlToDom","appendToDocument","close"],"mappings":"AAAA;;;;;;AACA,IAAMA,QAAQ,GAAGC,OAAO,CAAC,uBAAD,CAAxB;;eACkCA,OAAO,CAAC,gCAAD,C;IAAjCC,qB,YAAAA,qB;;AAERC,OAAO,CAACC,cAAR;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,oCACkBC,MADlB,EAC0BC,WAD1B,EACuC;AACnC,cAAQC,MAAM,CAACD,WAAD,CAAd;AACE,aAAK,WAAL;AAAkB;AAChB,mBAAOE,+BAA+B,CAAC,MAAD,EAASF,WAAT,EAAsBD,MAAtB,CAAtC;AACD;;AAED,aAAK,UAAL;AACA,aAAK,iBAAL;AACA,aAAK,uBAAL;AACA,aAAK,eAAL;AAAsB;AACpB;AACA,gBAAI;AACF,qBAAOG,+BAA+B,CAAC,KAAD,EAAQF,WAAR,EAAqBD,MAArB,CAAtC;AACD,aAFD,CAEE,OAAOI,KAAP,EAAc;AACd,kBAAMC,QAAQ,GAAGF,+BAA+B,CAAC,KAAD,EAAQF,WAAR,CAAhD;AACA,kBAAMK,OAAO,GAAGD,QAAQ,CAACE,eAAT,CAAyB,sDAAzB,EAAiF,aAAjF,CAAhB;AAEAD,cAAAA,OAAO,CAACE,WAAR,GAAsBJ,KAAK,CAACK,OAA5B;AAEAJ,cAAAA,QAAQ,CAACK,WAAT,CAAqBJ,OAArB;AACA,qBAAOD,QAAP;AACD;AACF;;AAED;AACE,gBAAM,IAAIM,SAAJ,CAAc,qBAAd,CAAN;AAxBJ;AA0BD;AA5BH;;AAAA;AAAA;;AA+BA,SAASR,+BAAT,CAAyCS,WAAzC,EAAsDX,WAAtD,EAAmED,MAAnE,EAA2E;AACzE,MAAMK,QAAQ,GAAGV,QAAQ,CAACkB,UAAT,CAAoB,EAApB,EAAwB;AACvCC,IAAAA,OAAO,EAAE;AACPF,MAAAA,WAAW,EAAXA,WADO;AAEPG,MAAAA,QAAQ,EAAE,OAFH;AAGPd,MAAAA,WAAW,EAAXA,WAHO,CAIP;;AAJO;AAD8B,GAAxB,CAAjB,CADyE,CAUzE;;AACAJ,EAAAA,qBAAqB,CAACQ,QAAD,EAAW;AAC9BW,IAAAA,sBAAsB,EAAE,EADM;AAE9BC,IAAAA,qBAAqB,EAAE;AAFO,GAAX,CAArB;;AAKA,MAAIjB,MAAM,KAAKkB,SAAf,EAA0B;AACxBb,IAAAA,QAAQ,CAACc,UAAT,CAAoBC,gBAApB,CAAqCpB,MAArC,EAA6CK,QAA7C;AACD;;AACDA,EAAAA,QAAQ,CAACgB,KAAT;AACA,SAAOhB,QAAP;AACD","sourcesContent":["\"use strict\";\nconst Document = require(\"../generated/Document\");\nconst { applyDocumentFeatures } = require(\"../../browser/documentfeatures\");\n\nexports.implementation = class DOMParserImpl {\n  parseFromString(string, contentType) {\n    switch (String(contentType)) {\n      case \"text/html\": {\n        return createScriptingDisabledDocument(\"html\", contentType, string);\n      }\n\n      case \"text/xml\":\n      case \"application/xml\":\n      case \"application/xhtml+xml\":\n      case \"image/svg+xml\": {\n        // TODO: use a strict XML parser (sax's strict mode might work?) and create parsererror elements\n        try {\n          return createScriptingDisabledDocument(\"xml\", contentType, string);\n        } catch (error) {\n          const document = createScriptingDisabledDocument(\"xml\", contentType);\n          const element = document.createElementNS(\"http://www.mozilla.org/newlayout/xml/parsererror.xml\", \"parsererror\");\n\n          element.textContent = error.message;\n\n          document.appendChild(element);\n          return document;\n        }\n      }\n\n      default:\n        throw new TypeError(\"Invalid contentType\");\n    }\n  }\n};\n\nfunction createScriptingDisabledDocument(parsingMode, contentType, string) {\n  const document = Document.createImpl([], {\n    options: {\n      parsingMode,\n      encoding: \"UTF-8\",\n      contentType\n      // TODO: somehow set URL to active document's URL\n    }\n  });\n\n  // \"scripting enabled\" set to false\n  applyDocumentFeatures(document, {\n    FetchExternalResources: [],\n    SkipExternalResources: false\n  });\n\n  if (string !== undefined) {\n    document._htmlToDom.appendToDocument(string, document);\n  }\n  document.close();\n  return document;\n}\n"]},"metadata":{},"sourceType":"script"}